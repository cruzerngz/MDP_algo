// receive configuration string from android
                    if (line.matches("^AND:.*") & firstInstFlag == false) {
                        stmInstructions = null;
                        instructionCounter = 0;
                        firstInstFlag = true;
                        String configString = line.substring(4).replace(',', '\n');
                        stmInstructions = PathPlanner.gridPath(configString);
                        ack = "AND:received robot and obstacles successfully";
                        firstInstFlag = true;

                    }

                    // send first stmInstruction after AND sends start
                    if (line.matches("AND:START") & firstInstFlag == true) {
                        try {
                            ack = "STM:" + (String) stmInstructions[instructionCounter];
                        } catch (Exception e) {
                            ack = "AND:unable to generate path, please check layout of obstacles";
                        }
                    }

                    // send subsequent instructions after receive acknowledgement from stm
                    if (line.matches("STM:&")) {
                        instructionCounter++;
                        // if there are still instructions
                        // send them
                        if (instructionCounter < stmInstructions.length) {
                            // if next instruction is image capture tell IMG to take picture
                            if ((String) stmInstructions[instructionCounter] == "cap") {
                                ack = "IMG:cap";
                            } else {
                                // otherwise it is just move the robot
                                ack = "STM:" + (String) stmInstructions[instructionCounter];
                            }
                        } else {
                            // if there are no more instructions

                        }
                    }

                    // after an image capture command, receive the image id
                    // save the imageId
                    // return the position of robot to android first
                    if (line.matches("IMG:.*")) {
                        Object xCoord = "1";
                        Object yCoord = "1";
                        Object direction = "NORTH";
                        ack = "AND:ROBOT," + (String) xCoord + "," + (String) yCoord + "," + (String) direction;
                        imageId = line.substring(4);
                        sendImageFlag = true;
                    }

                    // after sending position of android and sending image
                    // should have some acknowledgement from android
                    // then we send the image back to the android
                    if (sendImageFlag & line.matches("AND:.*")) {
                        Object obstacleId = "3";
                        ack = "AND:TARGET," + (String) obstacleId + "," + imageId;
                        sendImageFlag = false;
                        obstacleDoneFlag = true;
                        imageId = "";
                    }

                    // after sending image to android, there is acknowledgemnt
                    // so can start giving the next command
                    if (obstacleDoneFlag == true & line.matches("AND:.*")) {
                        obstacleDoneFlag = false;
                        instructionCounter++;
                        // if there are still instructions
                        // send them
                        if (instructionCounter < stmInstructions.length) {
                            // if next instruction is image capture tell IMG to take picture
                            if ((String) stmInstructions[instructionCounter] == "cap") {
                                ack = "IMG:cap";
                            } else {
                                // otherwise it is just move the robot
                                ack = "STM:" + (String) stmInstructions[instructionCounter];
                            }
                        } else {
                            // if there are no more instructions

                        }
                    }